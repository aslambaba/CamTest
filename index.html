<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebRTC Video Capture</title>
  <style>
    video {
      width: 320px;
      height: 240px;
    }
  </style>
</head>
<body>
  <video id="local-video"></video>
  <button id="capture-button">Capture Video</button>

  <script>

    let videoStream;

    async function TEST(){
        videoStream = await navigator.mediaDevices.getUserMedia({ video: true });
    }
    TEST()
    // Display the video stream in the local-video element.
    const localVideo = document.getElementById('local-video');
    localVideo.srcObject = videoStream;

    // Get the capture button.
    const captureButton = document.getElementById('capture-button');

    // Start capturing the video when the capture button is clicked.
    captureButton.addEventListener('click', async () => {
      // Create a MediaRecorder instance.
      const mediaRecorder = new MediaRecorder(videoStream, { mimeType: 'video/mp4;codecs=h264' });

      // Start recording the video.
      mediaRecorder.start();

      // Wait for the recording to finish.
      await mediaRecorder.stop();

      // Get the recorded video data.
      const recordedVideoData = mediaRecorder.getBlob();

      // Create a new video element.
      const capturedVideo = document.createElement('video');
      capturedVideo.src = URL.createObjectURL(recordedVideoData);

      // Display the captured video in the body of the page.
      document.body.appendChild(capturedVideo);
    });
  </script>
</body>
</html>
